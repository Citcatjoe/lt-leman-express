"use strict";$.getJSON("json/distances.json",(function(e){function t(){var t=$(".chosen-value.from").val(),s=$(".chosen-value.to").val();if(t&&s){for(var l=!1,i=0;i<e.length;i++)if(e[i].from==t&&e[i].to==s){l=!0,console.log(e[i]);var a=e[i].distance,o;if(a>60){var n=Math.floor(a/60);a%=60,o=n>1?n+" heures et "+a+" minutes":"une heure et "+a+" minutes"}else o=a+" minutes";$("#schedule-result div.error").text(""),$("#schedule-result div.time .prepend").text("Le trajet dure "),$("#schedule-result div.time .bigfat").text(o),$("#schedule-result div.time .append").text("dans ce sens."),$("#schedule-result div.time .reverse").text("Voir le trajet en sens inverse")}l||($("#schedule-result div.time *").text(""),t==s?$("#schedule-result div.error").text("Merci de choisir deux stations différentes."):$("#schedule-result div.error").text("Aucune information trouvée."))}}var s=$(".chosen-value"),l=$(".value-list"),i,a=[].concat(document.querySelectorAll("li"))[0],o=[],n=[];$(".unique-list li").each((function(){o.push($(this).text()),n.push($(this).text().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))})),s.each((function(e,t){$(this).on("input",(function(){var e=$(this).data("values"),t=$(".value-list."+e);t.addClass("open");var s=$(this).val().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),l=t.find("li"),i=void 0;if(s.length>0)for(var r=0;r<o.length;r++)n[r].includes(s)?l[r].classList.remove("closed"):l[r].classList.add("closed");else for(var u=0;u<a.length;u++)l[u].classList.remove("closed")}))})),$(".value-list li").on("click",(function(e){$(this).parent().prev().val($(this).text()),$(".value-list li").addClass("closed"),t(),e.stopPropagation()})),$(".reverse").click((function(e){var s=$(".chosen-value.from").val(),l=$(".chosen-value.to").val();$(".chosen-value.from").val(l),$(".chosen-value.to").val(s),t(),e.stopPropagation()})),s.each((function(e,t){$(this).on("click",(function(e){e.stopPropagation()})),$(this).on("focus",(function(e){$(this).select();var t=$(this).data("values"),s=$(".value-list."+t);s.addClass("open"),s.find("li").each((function(){$(this).removeClass("closed")}))}))})),s.each((function(e,t){$(this).on("blur",(function(){var e=$(this).data("values"),t;$(".value-list."+e).addClass("closed")}))})),$("body").click((function(){$(".value-list").addClass("closed"),$(".value-list li").addClass("closed")}))})).fail((function(){console.log("Erreur chargement des arrêts"),$("#schedule-result div.error").text("Erreur lors du chargement des données.")}));