"use strict";$.getJSON("json/distances.json",function(e){var t=$(".chosen-value"),s=($(".value-list"),[].concat(document.querySelectorAll("li"))[0]),l=[],i=[];function a(){var t=$(".chosen-value.from").val(),s=$(".chosen-value.to").val();if(t&&s){for(var l=!1,i=0;i<e.length;i++)if(e[i].from==t&&e[i].to==s){l=!0,console.log(e[i]);var a,o=e[i].distance;if(o>60){var n=Math.floor(o/60);o%=60,a=n>1?n+" heures et "+o+" minutes":"une heure et "+o+" minutes"}else a=o+" minutes";$("#schedule-result div.error").text(""),$("#schedule-result div.time .prepend").text("Le trajet dure "),$("#schedule-result div.time .bigfat").text(a),$("#schedule-result div.time .append").text("dans ce sens."),$("#schedule-result div.time .reverse").text("Voir le trajet en sens inverse")}l||($("#schedule-result div.time *").text(""),t==s?$("#schedule-result div.error").text("Merci de choisir deux stations différentes."):$("#schedule-result div.error").text("Aucune information trouvée."))}}$(".unique-list li").each(function(){l.push($(this).text()),i.push($(this).text().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))}),t.each(function(e,t){$(this).on("input",function(){var e=$(this).data("values"),t=$(".value-list."+e);t.addClass("open");var a=$(this).val().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),o=t.find("li");if(a.length>0)for(var n=0;n<l.length;n++)i[n].includes(a)?o[n].classList.remove("closed"):o[n].classList.add("closed");else for(var r=0;r<s.length;r++)o[r].classList.remove("closed")})}),$(".value-list li").on("click",function(e){$(this).parent().prev().val($(this).text()),$(".value-list li").addClass("closed"),a(),e.stopPropagation()}),$(".reverse").click(function(e){var t=$(".chosen-value.from").val(),s=$(".chosen-value.to").val();$(".chosen-value.from").val(s),$(".chosen-value.to").val(t),a(),e.stopPropagation()}),t.each(function(e,t){$(this).on("click",function(e){e.stopPropagation()}),$(this).on("focus",function(e){$(this).select();var t=$(this).data("values"),s=$(".value-list."+t);s.addClass("open"),s.find("li").each(function(){$(this).removeClass("closed")})})}),t.each(function(e,t){$(this).on("blur",function(){var e=$(this).data("values");$(".value-list."+e).addClass("closed")})}),$("body").click(function(){$(".value-list").addClass("closed"),$(".value-list li").addClass("closed")})}).fail(function(){console.log("Erreur chargement des arrêts"),$("#schedule-result div.error").text("Erreur lors du chargement des données.")});